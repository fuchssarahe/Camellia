class Api::OwnershipsController < ApplicationController

  before_action :ensure_logged_in

  def create
    new_params = {tea_id: params[:tea_id], user_id: current_user.id}
    ownership = Ownership.new(new_params)
    if ownership.save
      @tea = Tea.find(params[:tea_id])
      render 'api/teas/show'
    else
      render json: ownership.errors, status: 401
    end
  end

  def destroy
    ownership = Ownership.find_by(tea_id: params[:tea_id], user_id: current_user.id)
    if ownership.destroy
      @tea = Tea.find(params[:tea_id])
      render 'api/teas/show'
    else
      render json: ownership.errors, status: 401
    end
  end

  def index
    # returns teas owned by a particular user_id
    @teas = current_user.teas
    render 'api/teas/index'
  end

end
